<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MobileCondoManagement.ViewModels"
             xmlns:converters="clr-namespace:MobileCondoManagement.Converters"
             x:Class="MobileCondoManagement.Views.ForgotPasswordPage"
             Title="Forgot Password"
             x:DataType="viewmodels:ForgotPasswordViewModel"
             Shell.NavBarIsVisible="False"
             BackgroundColor="#F3F4F6">

    <Grid RowDefinitions="Auto, *">
        <!-- Título e mensagem -->
        <VerticalStackLayout Grid.Row="0" Margin="20, 40, 20, 20" HorizontalOptions="CenterAndExpand">
            <Label Text="Forgot Password"
                   FontSize="28"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="#1F2937" />
            <Label Text="Please enter your email to receive a password reset link."
                   Margin="0, 10, 0, 0"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   TextColor="#4B5563" />
        </VerticalStackLayout>

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="20">

                <!-- Feedback de sucesso ou erro -->
                <Label Text="{Binding Message}"
                       FontSize="14"
                       HorizontalTextAlignment="Center"
                       IsVisible="{Binding Message, Converter={StaticResource IsNotNullOrEmptyConverter}}"
                       TextColor="{Binding IsSuccess, Converter={StaticResource BooleanToColorConverter}}" />

                <!-- Campo de E-mail -->
                <Frame Style="{StaticResource CardFrameStyle}">
                    <Entry Placeholder="Email Address"
                           Text="{Binding Email}"
                           Keyboard="Email"
                           PlaceholderColor="#9CA3AF"
                           TextColor="#1F2937" />
                </Frame>

                <!-- Botão de Enviar Link -->
                <Button Text="Send Reset Link"
                        Command="{Binding SendResetLinkCommand}"
                        IsEnabled="{Binding IsNotBusy}"
                        Style="{StaticResource PrimaryButtonStyle}" />  
            </VerticalStackLayout>
        </ScrollView>
    </Grid>

    <ContentPage.Resources>
        <ResourceDictionary>
            <Style x:Key="CardFrameStyle" TargetType="Frame">
                <Setter Property="CornerRadius" Value="10" />
                <Setter Property="Padding" Value="15" />
                <Setter Property="BorderColor" Value="#E5E7EB" />
                <Setter Property="HasShadow" Value="True" />
                <Setter Property="Shadow" Value="1, 2, 5, 0" />
            </Style>

            <Style x:Key="PrimaryButtonStyle" TargetType="Button">
                <Setter Property="CornerRadius" Value="10" />
                <Setter Property="Padding" Value="15, 0" />
                <Setter Property="BackgroundColor" Value="#F59E0B" />
                <Setter Property="TextColor" Value="White" />
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontAttributes" Value="Bold" />
            </Style>

            <converters:IsNotNullOrEmptyConverter x:Key="IsNotNullOrEmptyConverter" />
            <converters:BooleanToColorConverter x:Key="BooleanToColorConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
</ContentPage>

