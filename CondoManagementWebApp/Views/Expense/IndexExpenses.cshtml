@model IEnumerable<ClassLibrary.DtoModels.CondominiumWithExpensesDto>

@{
	ViewData["Title"] = "Condominium Expenses";
}

<div class="row page-titles mx-0 d-flex align-items-center">
	<div class="col-sm-6 p-md-0">
		<div class="welcome-text">
			<h4>Condominiums Expenses</h4>
		</div>
	</div>
</div>

@if (!Model.Any())
{
	<p class="mt-4">No condominiums found with expenses.</p>
}
else
{
	<div class="accordion" id="expensesAccordion">
		@foreach (var condo in Model)
		{
			<div class="accordion-item mt-4">
				<h2 class="accordion-header" id="heading_@condo.CondominiumId">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
							data-bs-target="#collapse_@condo.CondominiumId" aria-expanded="false"
							aria-controls="collapse_@condo.CondominiumId">
						@condo.CondoName
					</button>
				</h2>
				<div id="collapse_@condo.CondominiumId" class="accordion-collapse collapse"
					 aria-labelledby="heading_@condo.CondominiumId" data-bs-parent="#expensesAccordion">
					<div class="accordion-body p-0">
						@if (condo.ExpensesDto != null && condo.ExpensesDto.Any())
						{
							<div class="table-responsive">
								<table class="table table-striped table-hover">
									<thead>
										<tr>
											<th>Expense Type</th>
											<th>Detail</th>
											<th>Amount</th>
										</tr>
									</thead>
									<tbody>
										@foreach (var item in condo.ExpensesDto)
										{
											<tr>
												<td>@Html.DisplayFor(modelItem => item.ExpenseTypeDto.Name)</td>
												<td>@Html.DisplayFor(modelItem => item.Detail)</td>
												<td>@Html.DisplayFor(modelItem => item.Amount)</td>
											</tr>
										}
									</tbody>
								</table>
							</div>
						}
						else
						{
							<p class="mt-3 text-center text-muted">No expenses found for this condominium.</p>
						}
					</div>
				</div>
			</div>
		}
	</div>
}